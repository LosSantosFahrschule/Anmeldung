<!--

<form method="post" action="forum/ucp.php?mode=login">
<label for="username">Username: </label> <input type="text" name="username" id="username" size="40" /><br /><br />
 <label for="password">Password: </label><input type="password" name="password" id="password" size="40" /><br /><br />
 <label for="autologin">Remember Me?: </label><input type="checkbox" name="autologin" id="autologin"  /><br /><br />
 <input type="submit" value="Log In" name="login" />
 <input type="hidden" name="redirect" value="../index.php" />
 </form>

 
 require_once('global.php');
$username = 'example'; // or email
$password = 'example';
try {
	$user = wcf\system\user\authentication\UserAuthenticationFactory::getInstance()->getUserAuthentication()->loginManually($username, $password);
}
catch (Exception $e) {
	if ($e->getField() == 'username') {
		try {
			$user = wcf\system\user\authentication\EmailUserAuthentication::getInstance()->loginManually($username, $password);
		}
		catch (Exception $e2) {
			echo "Username falsch";
			die();
		}
	}
	else {
		echo "Passwort falsch";
		die();
	}
}
\wcf\system\WCF::getSession()->changeUser($user);
echo "alles gut"; 
 
-->
<html>
<body>
<div id="results">
</div>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="js/remote.js"></script>
<script type="text/javascript">
/*$.ajax({
  url: "https://www.gvmp.de/forum/login",
  cache: false,
  crossDomain: true,
  dataType: 'jsonp',
  jsonp: false,
  //jsonpCallback: false,
  jsonp : false,
    jsonpCallback: 'jsonCallback',
  success: function(html){
    //$("#results").append(html);
	console.log(html);
	//alert(this.headers);
  },
  error: function (html) {
	console.log(html);
	//alert(this.headers);
  }
});*/

$.asyncForm(
     {
        action: 'https://www.gvmp.de/',
        params: {
            param1 : "bla",
            param2 : "bla"
        },

        method:'get',

        onLoadFinished: function(response) {
            console.log(response);
        }

});

$.ajaxSetup({
    scriptCharset: "utf-8", //or "ISO-8859-1"
    contentType: "application/json; charset=utf-8"
});

$.getJSON('https://whateverorigin.org/get?url=' + 
    encodeURIComponent('https://www.gvmp.de/forum/login') + '&callback=?',
    function (data) {
        console.log("> ", data);

        //If the expected response is text/plain
        //$("#results").html(data.contents);
		
		var elements = $(data.contents);
		
		console.log($('#loginForm > div.formSubmit > input[type="hidden"]:nth-child(3)', elements));
		
		//var doc = new DOMParser().parseFromString(data.contents,'text/xml');
		//var result = doc.evaluate('//*[@id="loginForm"]/div[2]/input[3]', doc, null, XPathResult.ANY_TYPE, null);
		//console.log(result); // returns 'test'

        //If the expected response is JSON
        //var response = $.parseJSON(data.contents);
});

/*function jsonp(url, callback) {
    var callbackName = 'jsonp_callback_' + Math.round(100000 * Math.random());
    window[callbackName] = function(data) {
        delete window[callbackName];
        document.body.removeChild(script);
        callback(data);
    };

    var script = document.createElement('script');
    script.src = url;
    document.body.appendChild(script);
}

jsonp('https://www.gvmp.de/forum/login', function(data) {
   //alert(data);
});*/

</script>
</body>
</html>